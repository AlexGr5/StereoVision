# StereoVision
Реализация стереозрения на двух вебкамерах и одной для построение карты глубины.

# Стереозрение
ПО для захвата и сохранения оригинальных изображений с камер для дальнейших калибровок камер (2camers), ПО для калибровки камер по отдельности (camera_calibration), ПО для стереокалибровки (stereo_calibration), которая доступна только после калибровок по отдельности, универсальная стереокалибровка (universal_stereo_calibration.py), которая доступна сразу и главное ПО (depth_map), которое применяет калибровки и строит карту глубины.

# Интерфейс
Программы (2camers.py) и (depth_map.py) имеют похожий начальный интерфес выбора камер. Нужно цифрами на клавиатуре выбрать две нужные камеры из имеющихся в компьютере. Далее выбрать правильное положение в стереопаре, чтобы изображение с левой камеры было слева, а с правой камеры - справа.

# Калибровки стереопары (ОБЯЗАТЕЛЬНО)
В 2camers.py ОБЯЗАТЕЛЬНО указать размер шахматной доски CHESSBOARD_SIZE - на 1 меньше чем количество квадратов (если доска 8 на 8, то указываем 7 на 7) и указать размер одной ячейки в сантиметрах SQUARE_SIZE.

Для калибровки нужно в по для создания изображений (2camers.py) вызвать калибровки по отдельности по нажатии на клавишу 'C', но необходимо сделать минимум 10 изображений (в окне программы они отсчитываются и называются "СЫРЫЕ"). Если калибровки успешно завершатся, то в каталоге /output создадутся 2 файла: calibration_data_left.pkl и calibration_data_right.pkl. После этого с уже применными калибровками по отдельности нужно сделать ещё минимум 10 снимков для стереокалибровки (в окне программы они будут отсчитыватся и называться "СТЕРЕО") и нажать на кнопку 'S'. После завершения стереокалибровки в каталоге /output появится файл stereo_calibration_data.pkl. После этого можно запускать (depth_map.py) и смотреть на результат.
Есил качество калибровок по отдельности хорошее, но нужно переделать стереокалибровку, то по нажатию на клавишу 'L' можно загрузить уже имеющиеся калибровки по отдельности и не калибровать по отдельности заново.

Примечание. Если не сильно хочется возиться с калибровками, то можно просто откалибровать сразу всё что нужно по нажатию на кнопку 'U', но нужно сделать минимум 10 "сырых" изображений. Качество такой калибровки может быть очень плохим, поэтому не рекомендуется.

# Каталоги, которые создадутся автоматически
"СЫРЫЕ" снимки сохраняются в каталоге /captures.
"СТЕРЕО" снимки сохраняются в каталоге /captures_stereo.
Все калибровочные файлы сохраняются в каталоге /output и имеют расширение .pkl.

=== При повторных калибровках можно, а иногда и нужно, удалаять все перечисленные каталоги выше, чтобы старые снимки не влияли на новые калибровки. ===

# Монозрение
/mono
Калибровки не нужны (plag-and-play).
Построение карты глубины по одному изображению (нужна только одна камера).
mono_depth_map_ai.py           - построение карты глубины с помощью модели ИИ.
mono_depth_map_with_motion.py  - построение карты глубины за счет движения камеры.
